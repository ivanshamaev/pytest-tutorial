# üîß –§–∏–∫—Å—Ç—É—Ä—ã –≤ Pytest - –ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö

## üìå –ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ–∏–∫—Å—Ç—É—Ä–∞?

**–§–∏–∫—Å—Ç—É—Ä–∞** ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –æ–±—ä–µ–∫—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤. –î—É–º–∞–π—Ç–µ –æ —Ñ–∏–∫—Å—Ç—É—Ä–µ –∫–∞–∫ –æ **–ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ –ø–µ—Ä–µ–¥ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–º**.

–ù–∞–ø—Ä–∏–º–µ—Ä:
- –ü–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –≤—ã –≤–∫–ª—é—á–∞–µ—Ç–µ –µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑, –∞ –Ω–µ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π
- –ü–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º —Ä–µ—Ü–µ–ø—Ç–∞ –≤—ã –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã
- –ü–µ—Ä–µ–¥ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π –≤—ã —Ä–∞–∑–º–∏–Ω–∞–µ—Ç–µ—Å—å

**–ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∞–ª–æ–≥–∏—è:** –§–∏–∫—Å—Ç—É—Ä–∞ ‚Äî —ç—Ç–æ –∫–∞–∫ **–≤–∫–ª—é—á–∏—Ç—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –æ–¥–∏–Ω —Ä–∞–∑** –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è –º–Ω–æ–≥–∏—Ö —Ä–∞—Å—á—ë—Ç–æ–≤, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤–∫–ª—é—á–∞—Ç—å –µ–≥–æ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π.

## üéØ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –ë–ï–ó —Ñ–∏–∫—Å—Ç—É—Ä –∏ –° —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä:

### ‚ùå –î–û (–±–µ–∑ —Ñ–∏–∫—Å—Ç—É—Ä - –ø–ª–æ—Ö–æ–π –≤–∞—Ä–∏–∞–Ω—Ç)

```python
def test_addition():
    calc = Calculator()  # –í–∫–ª—é—á–∞–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
    result = calc.add(2, 3)
    assert result == 5

def test_subtraction():
    calc = Calculator()  # –û–ø—è—Ç—å –≤–∫–ª—é—á–∞–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
    result = calc.subtract(10, 3)
    assert result == 7

def test_multiplication():
    calc = Calculator()  # –ò —Å–Ω–æ–≤–∞ –≤–∫–ª—é—á–∞–µ–º!
    result = calc.multiply(4, 5)
    assert result == 20
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- üìù –ü–æ–≤—Ç–æ—Ä—è–µ–º `calc = Calculator()` –≤–µ–∑–¥–µ (—Å–∫—É—á–Ω–æ!)
- üêõ –ï—Å–ª–∏ —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–º–µ–Ω–∏—Ç—Å—è, –º–µ–Ω—è—Ç—å –Ω—É–∂–Ω–æ –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Å—Ç–µ
- üò¥ –ú–Ω–æ–≥–æ "—à—É–º–æ–≤—ã—Ö" —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–≤–ª–µ–∫–∞—é—Ç –æ—Ç —Å–º—ã—Å–ª–∞ —Ç–µ—Å—Ç–∞

### ‚úÖ –ü–û–°–õ–ï (—Å —Ñ–∏–∫—Å—Ç—É—Ä–æ–π - —Ö–æ—Ä–æ—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç)

```python
import pytest

# 1Ô∏è‚É£ –°–æ–∑–¥–∞—ë–º —Ñ–∏–∫—Å—Ç—É—Ä—É –æ–¥–∏–Ω —Ä–∞–∑
@pytest.fixture
def calc():
    """–í–∫–ª—é—á–∞–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤"""
    return Calculator()

# 2Ô∏è‚É£ –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∏–∫—Å—Ç—É—Ä—É –≤–µ–∑–¥–µ
def test_addition(calc):  # calc –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
    result = calc.add(2, 3)
    assert result == 5

def test_subtraction(calc):  # –°–Ω–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–Ω—É —Ñ–∏–∫—Å—Ç—É—Ä—É
    result = calc.subtract(10, 3)
    assert result == 7

def test_multiplication(calc):  # –ò –µ—â—ë —Ä–∞–∑
    result = calc.multiply(4, 5)
    assert result == 20
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚ú® –ö–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –æ–ø–∏—Å–∞–Ω –æ–¥–∏–Ω —Ä–∞–∑
- üîÑ –ï—Å–ª–∏ —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–º–µ–Ω–∏—Ç—Å—è, –º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- üëÄ –¢–µ—Å—Ç—ã —á–∏—Ç–∞—é—Ç—Å—è —á–∏—â–µ ‚Äî –≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º
- üéÅ –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç "—Å–≤–µ–∂—É—é –∫–æ–ø–∏—é" –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞

## üìö –¢—Ä–∏ —Ç–∏–ø–∞ —Ñ–∏–∫—Å—Ç—É—Ä (–æ—Ç –ø—Ä–æ—Å—Ç—ã—Ö –∫ —Å–ª–æ–∂–Ω—ã–º)

### 1Ô∏è‚É£ –ü—Ä–æ—Å—Ç–∞—è —Ñ–∏–∫—Å—Ç—É—Ä–∞ - –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç

```python
# –°–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è —Ñ–∏–∫—Å—Ç—É—Ä–∞ –≤ –º–∏—Ä–µ
@pytest.fixture
def calc():
    """–°–æ–∑–¥–∞—ë–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è —Ç–µ—Å—Ç–∞"""
    return Calculator()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
def test_simple_addition(calc):
    result = calc.add(5, 3)
    assert result == 8
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. Pytest –≤–∏–¥–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `calc` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–µ—Å—Ç–∞
2. Pytest –∏—â–µ—Ç —Ñ–∏–∫—Å—Ç—É—Ä—É —Å –∏–º–µ–Ω–µ–º `calc`
3. Pytest –≤—ã–∑—ã–≤–∞–µ—Ç `@pytest.fixture def calc()` –∏ –ø–æ–ª—É—á–∞–µ—Ç `Calculator()`
4. Pytest –ø–µ—Ä–µ–¥–∞—ë—Ç —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é —Ç–µ—Å—Ç–∞
5. –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

### 2Ô∏è‚É£ –§–∏–∫—Å—Ç—É—Ä–∞ —Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π –∏ –æ—á–∏—Å—Ç–∫–æ–π (setup & teardown)

```python
@pytest.fixture
def calc_with_history():
    """–°–æ–∑–¥–∞—ë–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∏ –æ—á–∏—â–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞"""
    # üìå –ü–û–î–ì–û–¢–û–í–ö–ê (setup) - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º
    print("‚úÖ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤–∫–ª—é—á–µ–Ω, –∏—Å—Ç–æ—Ä–∏—è –æ—á–∏—â–µ–Ω–∞")
    calc = Calculator()
    calc.clear_history()
    
    # –ö–æ–¥ —Ç–µ—Å—Ç–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å
    yield calc  # <- –≠—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–æ–µ —Å–ª–æ–≤–æ! –ü–æ—Å–ª–µ –Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–µ—Å—Ç
    
    # üßπ –û–ß–ò–°–¢–ö–ê (teardown) - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞
    print("‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")
    calc.save_history_to_file()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
def test_with_cleanup(calc_with_history):
    calc = calc_with_history
    calc.add(10, 20)
    assert calc.result == 30
    # –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑–æ–≤–µ—Ç—Å—è –∫–æ–¥ –ø–æ—Å–ª–µ yield
```

**–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –æ—á–∏—Å—Ç–∫–∞?**
- –í—ã —Å–æ–∑–¥–∞–ª–∏ —Ñ–∞–π–ª ‚Äî —É–¥–∞–ª–∏—Ç–µ –µ–≥–æ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞
- –í—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å –∫ –ë–î ‚Äî –∑–∞–∫—Ä–æ–π—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –í—ã –≤–∫–ª—é—á–∏–ª–∏ —Å–µ—Ä–≤–∏—Å ‚Äî –≤—ã–∫–ª—é—á–∏—Ç–µ –µ–≥–æ

### 3Ô∏è‚É£ –§–∏–∫—Å—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥—É—é —Ñ–∏–∫—Å—Ç—É—Ä—É

```python
@pytest.fixture
def simple_calc():
    """–ë–∞–∑–æ–≤—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä"""
    return Calculator()

@pytest.fixture
def calc_with_memory(simple_calc):
    """–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –≤–∫–ª—é—á—ë–Ω–Ω–æ–π –ø–∞–º—è—Ç—å—é"""
    simple_calc.enable_memory()  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥—Ä—É–≥—É—é —Ñ–∏–∫—Å—Ç—É—Ä—É!
    simple_calc.memory_store(42)
    return simple_calc

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
def test_recall_from_memory(calc_with_memory):
    # –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —É–∂–µ –∏–º–µ–µ—Ç 42 –≤ –ø–∞–º—è—Ç–∏
    result = calc_with_memory.memory_recall()
    assert result == 42
```

## üéì –ü–æ–ª–Ω—ã–π –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä

### –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Å—Ç–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä

```python
# calculator.py
class Calculator:
    def __init__(self):
        self.result = 0
        self.memory = None
    
    def add(self, a, b):
        self.result = a + b
        return self.result
    
    def subtract(self, a, b):
        self.result = a - b
        return self.result
    
    def multiply(self, a, b):
        self.result = a * b
        return self.result
    
    def divide(self, a, b):
        if b == 0:
            raise ValueError("–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å!")
        self.result = a / b
        return self.result
    
    def clear(self):
        self.result = 0
        self.memory = None
```

### –¢–µ–ø–µ—Ä—å –ø–∏—à–µ–º —Ç–µ—Å—Ç—ã —Å —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏

```python
# test_calculator.py
import pytest
from calculator import Calculator

# ========== –§–ò–ö–°–¢–£–†–´ ==========

@pytest.fixture
def calc():
    """–ü—Ä–æ—Å—Ç–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞"""
    return Calculator()

@pytest.fixture
def calc_with_result(calc):
    """–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ —á—Ç–æ-—Ç–æ –ø–æ—Å—á–∏—Ç–∞–ª"""
    calc.add(10, 20)
    # –¢–µ–ø–µ—Ä—å calc.result == 30
    return calc

# ========== –ü–†–û–°–¢–´–ï –¢–ï–°–¢–´ ==========

class TestBasicOperations:
    """–¢–µ—Å—Ç—ã –±–∞–∑–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π"""
    
    def test_addition(self, calc):
        """–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ª–æ–∂–µ–Ω–∏–µ"""
        result = calc.add(2, 3)
        assert result == 5
    
    def test_subtraction(self, calc):
        """–ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã—á–∏—Ç–∞–Ω–∏–µ"""
        result = calc.subtract(10, 3)
        assert result == 7
    
    def test_multiplication(self, calc):
        """–ü—Ä–æ–≤–µ—Ä—è–µ–º —É–º–Ω–æ–∂–µ–Ω–∏–µ"""
        result = calc.multiply(4, 5)
        assert result == 20
    
    def test_division(self, calc):
        """–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–µ–ª–µ–Ω–∏–µ"""
        result = calc.divide(20, 4)
        assert result == 5

# ========== –¢–ï–°–¢–´ –° –û–®–ò–ë–ö–ê–ú–ò ==========

class TestErrors:
    """–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—à–∏–±–æ–∫"""
    
    def test_division_by_zero(self, calc):
        """–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É"""
        with pytest.raises(ValueError, match="–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å"):
            calc.divide(10, 0)

# ========== –¢–ï–°–¢–´ –° –ì–û–¢–û–í–´–ú–ò –î–ê–ù–ù–´–ú–ò ==========

class TestWithPreparedData:
    """–¢–µ—Å—Ç—ã —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏"""
    
    def test_result_preserved_after_addition(self, calc_with_result):
        """–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è"""
        # calc_with_result —É–∂–µ –∏–º–µ–µ—Ç result == 30
        assert calc_with_result.result == 30
    
    def test_continue_calculation(self, calc_with_result):
        """–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π"""
        # –ù–∞—á–∏–Ω–∞–µ–º —Å –≥–æ—Ç–æ–≤—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º 30
        new_result = calc_with_result.add(calc_with_result.result, 5)
        assert new_result == 35
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
pytest test_calculator.py -v

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Ç–æ–ª—å–∫–æ –∏–∑ –∫–ª–∞—Å—Å–∞ TestBasicOperations
pytest test_calculator.py::TestBasicOperations -v

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest test_calculator.py::TestBasicOperations::test_addition -v

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–∫—Å—Ç—É—Ä–∞—Ö
pytest test_calculator.py -v --fixtures
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—É—Å–∫–∞:**
```
test_calculator.py::TestBasicOperations::test_addition PASSED        [ 20%]
test_calculator.py::TestBasicOperations::test_subtraction PASSED     [ 40%]
test_calculator.py::TestBasicOperations::test_multiplication PASSED  [ 60%]
test_calculator.py::TestBasicOperations::test_division PASSED        [ 80%]
test_calculator.py::TestErrors::test_division_by_zero PASSED         [100%]

============================== 5 passed in 0.03s ===============================
```

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã

```bash
# 1. –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª calculator.py –∏ test_calculator.py
# (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–¥ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ –≤—ã—à–µ)

# 2. –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã
pytest test_calculator.py -v

# 3. –°–º–æ—Ç—Ä–∏–º, —á—Ç–æ –≤—Å–µ –ø—Ä–æ–π–¥—É—Ç ‚úÖ
```

## üí° –ì–ª–∞–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (–∑–∞–ø–æ–º–Ω–∏—Ç–µ!)

| –ü—Ä–∞–≤–∏–ª–æ | –ü—Ä–∏–º–µ—Ä |
|---------|--------|
| **–§–∏–∫—Å—Ç—É—Ä–∞** ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º `@pytest.fixture` | `@pytest.fixture\ndef app():` |
| **–¢–µ—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ñ–∏–∫—Å—Ç—É—Ä—É** –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–∏ | `def test_example(app):` |
| **–ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–µ–∂—É—é –∫–æ–ø–∏—é** —Ñ–∏–∫—Å—Ç—É—Ä—ã | –ù–µ –≤–ª–∏—è—é—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ |
| **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `yield` –¥–ª—è –æ—á–∏—Å—Ç–∫–∏** | `yield resource; cleanup_code` |
| **–ó–∞–≤–∏—Å–∏–º—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã** –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥—Ä—É–≥–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã | `def app_with_data(app):` |

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**–í: –ü–æ—á–µ–º—É –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–µ–∂—É—é –∫–æ–ø–∏—é —Ñ–∏–∫—Å—Ç—É—Ä—ã?**  
–û: –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–µ—Å—Ç—ã –Ω–µ –≤–ª–∏—è—é—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞. –ï—Å–ª–∏ –æ–¥–∏–Ω —Ç–µ—Å—Ç –¥–æ–±–∞–≤–∏—Ç —á–∏—Å–ª–æ –≤ –ø–∞–º—è—Ç—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞, —ç—Ç–æ –Ω–µ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–π —Ç–µ—Å—Ç.

**–í: –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ (teardown)?**  
–û: –ß—Ç–æ–±—ã –Ω–µ –æ—Å—Ç–∞–≤–ª—è—Ç—å "–≥—Ä—è–∑—å" –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–∫—Ä—ã—Ç—å —Ñ–∞–π–ª—ã, –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–µ—Ä, —É–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.

**–í: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∏–∫—Å—Ç—É—Ä –≤ –æ–¥–Ω–æ–º —Ç–µ—Å—Ç–µ?**  
–û: –î–∞! 
```python
def test_example(calc, another_fixture, third_fixture):
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ —Ç—Ä–∏ —Ñ–∏–∫—Å—Ç—É—Ä—ã!
    pass
```

**–í: –ê –µ—Å–ª–∏ –º–Ω–µ –Ω—É–∂–Ω–∞ –æ–¥–Ω–∞ —Ñ–∏–∫—Å—Ç—É—Ä–∞ –Ω–∞ –≤—Å–µ —Ç–µ—Å—Ç—ã?**  
–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `scope`:
```python
@pytest.fixture(scope="session")  # –û–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –≤—Å—é —Å–µ—Å—Å–∏—é —Ç–µ—Å—Ç–æ–≤
def expensive_resource():
    return Database("shared.db")
```

## üìñ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã –≥–æ—Ç–æ–≤—ã –∫:
1. –†–∞–±–æ—Ç–µ —Å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º–∏ —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö
2. –ò–∑—É—á–µ–Ω–∏—é [PYTEST_EXAMPLES.md](PYTEST_EXAMPLES.md) –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—é —Ñ–∏–∫—Å—Ç—É—Ä –≤ –≤–∞—à–µ–º –∫–æ–¥–µ –Ω–∞ —Ä–∞–±–æ—Ç–µ
